<br>
{% for k,v in outputs.items() %}

{% if "node_creds" in k or "cluster_creds" in k %}
<p><strong>{{k}}.ssh_private_key</strong>:
<div class="d-none ssh-key">{{ v['token'] | replace("\\n", "\n") }}</div>
<button class="btn btn-primary btn-sm downloadBtn" id="downloadBtn{{k}}"><i class="fa fa-download"></i> Download</button>
<button class="btn btn-success btn-sm copyBtn" id="copyBtn{{k}}"><i class="fa fa-copy"></i> Copy to clipboard</button>
<p></p>
<p><strong>{{k}}.ssh_login</strong>: {{ v['user'] }}</p>

{% elif "endpoint" in k or "url" in k %}
<p><strong>{{k}}</strong>: <a href="{{v}}" target="_blank">{{v}}</a></p>

{% else %}
<p><strong>{{k}}</strong>: {{v}}</p>
{% endif %}


<script>

function download(filename, text) {
  var element = document.createElement('a');
  element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(text));
  element.setAttribute('download', filename);

  element.style.display = 'none';
  document.body.appendChild(element);

  element.click();

  document.body.removeChild(element);
}


$(document).ready(function () {
    $(".downloadBtn").click(function () {
        var text = $(this).parent().find(".ssh-key")[0].innerHTML;
        var filename = "key.pem";

        download(filename, text);
    });
});

$(document).ready(function () {
   $(".copyBtn").click(function () {
     var text = $(this).parent().find(".ssh-key")[0].innerHTML;

  // Create a new textarea element and give it id='temp_element'
  var textarea = document.createElement('textarea');
  textarea.id = 'temp_element';
  textarea.style.height = 0;
  document.body.appendChild(textarea);
  textarea.value = text
  var selector = document.querySelector('#temp_element')
  selector.select()
  document.execCommand('copy')
  // Remove the textarea
  document.body.removeChild(textarea)

   });
});

</script>

{% endfor %}
